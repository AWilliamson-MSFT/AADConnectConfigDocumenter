<synchronizationRule>
  <id>{6f1bc185-65f9-4175-a31e-70fc975f464a}</id>
  <internal-id>{6f1bc185-65f9-4175-a31e-70fc975f464a}</internal-id>
  <version>1</version>
  <name>Out to AAD - User Join</name>
  <description />
  <immutable-tag>Microsoft.OuttoAADUserJoin.006</immutable-tag>
  <direction>Outbound</direction>
  <disabled>False</disabled>
  <connector>{b891884f-051e-4a83-95af-2544101c9083}</connector>
  <sourceObjectType>person</sourceObjectType>
  <targetObjectType>user</targetObjectType>
  <linkType>Provision</linkType>
  <precedence>123</precedence>
  <precedence-after>{00000000-0000-0000-0000-000000000000}</precedence-after>
  <precedence-before>{00000000-0000-0000-0000-000000000000}</precedence-before>
  <softDeleteExpiryInterval>00:00:00</softDeleteExpiryInterval>
  <EnablePasswordSync>true</EnablePasswordSync>
  <attribute-mappings>
    <mapping>
      <dest>accountEnabled</dest>
      <src>
        <attr>accountEnabled</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>commonName</dest>
      <src>
        <attr>cn</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>dnsDomainName</dest>
      <src>
        <attr>domainFQDN</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>lastPasswordChangeTimestamp</dest>
      <src>
        <attr>pwdLastSet</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>netBiosName</dest>
      <src>
        <attr>domainNetBios</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>onPremisesSamAccountName</dest>
      <src>
        <attr>accountName</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>onPremiseSecurityIdentifier</dest>
      <src>
        <attr>objectSid</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>dn</dest>
      <src>
        <attr>sourceAnchor</attr>
      </src>
      <expression>"CN={" &amp; ConvertToUTF8Hex([sourceAnchor]) &amp; "}"</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>sourceAnchor</dest>
      <src>
        <attr>cloudSourceAnchor</attr>
        <attr>sourceAnchor</attr>
      </src>
      <expression>IIF(IsPresent([cloudSourceAnchor]), IIF(Word([cloudAnchor],1,"_")=[sourceObjectType],IIF([cloudSourceAnchor] = [sourceAnchor],[sourceAnchor],Error("SourceAnchor attribute has changed.")),[sourceAnchor]),[sourceAnchor])</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>usageLocation</dest>
      <src>
        <attr>usageLocation</attr>
      </src>
      <expression>IIF(IsNullOrEmpty([usageLocation]),IgnoreThisFlow,[usageLocation])</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
  </attribute-mappings>
  <relationshipCriteria>
    <conditions>
      <condition>
        <csAttribute>sourceAnchor</csAttribute>
        <ilmAttribute>sourceAnchor</ilmAttribute>
      </condition>
    </conditions>
  </relationshipCriteria>
  <synchronizationCriteria>
    <conditions>
      <scope>
        <csAttribute>sourceObjectType</csAttribute>
        <csOperator>EQUAL</csOperator>
        <csValue>User</csValue>
      </scope>
      <scope>
        <csAttribute>cloudMastered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>cloudFiltered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>sourceAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
      <scope>
        <csAttribute>accountEnabled</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
    </conditions>
  </synchronizationCriteria>
</synchronizationRule>