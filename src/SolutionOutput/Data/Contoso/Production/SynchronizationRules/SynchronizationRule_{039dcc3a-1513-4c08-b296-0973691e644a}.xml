<synchronizationRule>
  <id>{039dcc3a-1513-4c08-b296-0973691e644a}</id>
  <internal-id>{039dcc3a-1513-4c08-b296-0973691e644a}</internal-id>
  <version>1</version>
  <name>Out to AAD - Group Join</name>
  <description />
  <immutable-tag>Microsoft.OuttoAADGroupJoin.006</immutable-tag>
  <direction>Outbound</direction>
  <disabled>False</disabled>
  <connector>{b891884f-051e-4a83-95af-2544101c9083}</connector>
  <sourceObjectType>group</sourceObjectType>
  <targetObjectType>group</targetObjectType>
  <linkType>Provision</linkType>
  <precedence>139</precedence>
  <precedence-after>{00000000-0000-0000-0000-000000000000}</precedence-after>
  <precedence-before>{00000000-0000-0000-0000-000000000000}</precedence-before>
  <softDeleteExpiryInterval>00:00:00</softDeleteExpiryInterval>
  <EnablePasswordSync>false</EnablePasswordSync>
  <attribute-mappings>
    <mapping>
      <dest>commonName</dest>
      <src>
        <attr>cn</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>dn</dest>
      <src>
        <attr>sourceAnchor</attr>
      </src>
      <expression>"CN={" &amp; ConvertToUTF8Hex([sourceAnchor]) &amp; "}"</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>member</dest>
      <src>
        <attr>member</attr>
      </src>
      <expression>IIF(([memberCount]&gt; 50000),Error("Maximum Group member count exceeded"),IgnoreThisFlow)</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>onPremiseSecurityIdentifier</dest>
      <src>
        <attr>objectSid</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>sourceAnchor</dest>
      <src>
        <attr>cloudSourceAnchor</attr>
        <attr>sourceAnchor</attr>
      </src>
      <expression>IIF(IsPresent([cloudSourceAnchor]),IIF([cloudSourceAnchor] = [sourceAnchor],[sourceAnchor],Error("SourceAnchor attribute has changed.")),[sourceAnchor])</expression>
      <valueMergeType>Update</valueMergeType>
    </mapping>
    <mapping>
      <dest>securityEnabled</dest>
      <src>
        <attr>securityEnabled</attr>
      </src>
      <valueMergeType>Update</valueMergeType>
    </mapping>
  </attribute-mappings>
  <relationshipCriteria>
    <conditions>
      <condition>
        <csAttribute>sourceAnchor</csAttribute>
        <ilmAttribute>sourceAnchor</ilmAttribute>
      </condition>
    </conditions>
  </relationshipCriteria>
  <synchronizationCriteria>
    <conditions>
      <scope>
        <csAttribute>cloudFiltered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>sourceAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
      <scope>
        <csAttribute>cloudMastered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>securityEnabled</csAttribute>
        <csOperator>EQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>cloudAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
    </conditions>
    <conditions>
      <scope>
        <csAttribute>cloudFiltered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>sourceAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
      <scope>
        <csAttribute>cloudMastered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>securityEnabled</csAttribute>
        <csOperator>EQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>memberCount</csAttribute>
        <csOperator>LESSTHAN</csOperator>
        <csValue>50000</csValue>
      </scope>
    </conditions>
    <conditions>
      <scope>
        <csAttribute>cloudFiltered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>sourceAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
      <scope>
        <csAttribute>cloudMastered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>mailEnabled</csAttribute>
        <csOperator>EQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>cloudAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
    </conditions>
    <conditions>
      <scope>
        <csAttribute>cloudFiltered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>sourceAnchor</csAttribute>
        <csOperator>ISNOTNULL</csOperator>
        <csValue />
      </scope>
      <scope>
        <csAttribute>cloudMastered</csAttribute>
        <csOperator>NOTEQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>mailEnabled</csAttribute>
        <csOperator>EQUAL</csOperator>
        <csValue>True</csValue>
      </scope>
      <scope>
        <csAttribute>memberCount</csAttribute>
        <csOperator>LESSTHAN</csOperator>
        <csValue>50000</csValue>
      </scope>
    </conditions>
  </synchronizationCriteria>
</synchronizationRule>